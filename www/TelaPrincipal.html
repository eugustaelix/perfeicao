<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta http-equiv="Content-Security-Policy"
        content="default-src * data: gap: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'" />
    <script src="cordova.js"></script>
    <link rel="stylesheet" href="components/loader.css" />
    <link rel="stylesheet" href="css/telaprincipalstyle.css" />
    <script src="components/loader.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet" />
    <script src="https://sapling.ai/static/js/sapling-sdk-v1.0.6.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>

<body>
    <br />
    <div style="margin-left: 5%;">
        <div onclick="window.location.href='index.html'">
            <label
                style="color:#009DFF;font-family:'Poppins';font-size:30px;-webkit-text-stroke: 0.5px #009DFF;">Per</label><label
                class="textborder"
                style="font-family:'Poppins';font-size:30px;-webkit-text-stroke: 0.5px black;">feição</label>
            <img src="imagens/Logo.png" height="50px" width="50px" class="logo" />
        </div>
        <br />
        <label id="titulo" style="font-size: 18px;font-family: 'Poppins';-webkit-text-stroke: 1.1px black">Corretor
            ortográfico</label>
        <br />
        <div class="transformarTexto">
            <div class="areaTexto">
                <div contenteditable="true" id="demo-editor" class="textoParaTransformar" placeholder="Digite ou cole seu texto aqui para verificá-lo..."></div>
            </div>
            <br>
            <label id="char-count">0/1000 caracteres</label> <!-- Contador de caracteres -->
            <div class="corretor">
                <div style="width: 80%;margin-left: 16%;">
                    <label id="seuTexto">Seu texto está esplêndido!</label>
                </div>
            </div>
        </div>
        <br />
        <label style="font-size: 18px;font-family: 'Poppins';-webkit-text-stroke: 1.1px black">Ferramentas</label>
        <br />
            <div class="Ferramentas">
        <div style="width: 55px;text-align: center;">
            <img class="ferramenta" onclick="alternarFuncao('traduzir')" src="imagens/tradutor.png" width="55px" style="margin-right: 4.3%" />
            <label>Tradutor</label>
        </div>
        <div style="width: 55px;text-align: center;">
            <img src="imagens/resumirTexto.png" class="ferramenta" onclick="alternarFuncao('resumirTexto')" width="55px" style="margin-right: 4.3%" />
            <label>Resumir Texto</label>
        </div>
        <div style="width: 55px;text-align: center;">
            <img src="imagens/detecPlagio.png" class="ferramenta" onclick="alternarFuncao('detectarPlagio')" width="55px" style="margin-right: 4.3%" />
            <label>Detecção de Plágio</label>
        </div>
        <div style="width: 55px;text-align: center;">
            <img src="imagens/detecIA.png" class="ferramenta" onclick="alternarFuncao('detectarIA')" width="55px" style="margin-right: 4.3%" />
            <label>Detecção de IA</label>
        </div>
        <div style="width: 55px;text-align: center;">
            <img src="imagens/detecIdioma.png" class="ferramenta" onclick="alternarFuncao('detectarIdioma')" width="55px" style="margin-right: 4.3%" />
            <label>Detecção de Idioma</label>
        </div>
    </div>
    </div>
    <div class="palavraDoDia">
        <br />
        <div style="margin-left: 5%;">
            <label style="font-size: 18px;font-family: 'Poppins';-webkit-text-stroke: 1.1px black;">Palavra do
                Dia</label>
            <br />
            <label id="palavradoDia"
                style="font-size: 31px;font-family: 'Poppins';-webkit-text-stroke: 1.4px #009DFF; color: #009DFF; letter-spacing: 4px; ">prole
            </label>
            <br />
            <br />
            <label id="classePalavra"
                style="font-size: 15px;font-family: 'Poppins';-webkit-text-stroke: 0.8px #8637F5; color: #8637F5;">substantivo
                feminino</label>
            <br />
            <label id="significado1"
                style="font-size: 15px;font-family: 'Poppins';-webkit-text-stroke: 0.4px #000000; color: #000000;">1.
                descendência; progénie; conjunto de filhos</label>
            <br />
            <i id="significado2"
                style="font-size: 15px;font-family: 'Poppins';-webkit-text-stroke: 0.3px #000000; color: #000000;">2.
                figurado
                sucessão</i>
            <br />
            <label id="significado1"
                style="font-size: 15px;font-family: 'Poppins';-webkit-text-stroke: 0.1px #000000; color: #000000;">Origem
                etimológica:
                <label id="origemPalavra" style="color:#009DFF">latim lito, -are</label>
            </label>
        </div>
    </div>
    <div class="rodape">
        <div style="display: flex;margin-left: 4%; margin-top: 2%;">
            <img style="margin-left: 0%;" src="imagens/sociais.png" height="40px" width="180px"> <label
                style="font-size: 10px;font-family: 'Poppins';-webkit-text-stroke: 0.3px black;margin-left: 3%; margin-top: 3%;">
                Termos e Condições | Privacidade </label>
        </div>
        <label class="center">
            Perfeição® S.A. 2024 — Davi Felix de Oliveira, Gustavo Felix Ferreira da Silva, Miguel Alves dos Santos Neto
            &
            Murilo Pierre de Lima
        </label>
    </div>
        <script type="text/javascript">
         Sapling.init({
            key: "UW44G50BQOU7WP5PQ2D8EXM5PECJFK43",
            mode: 'dev',
            autocomplete: true,
        });

        const contentEditable = document.getElementById('demo-editor');
        Sapling.observe(contentEditable);


        let ferramentaAtual = null; // Variável para armazenar a ferramenta atual

        function atualizarTitulo(texto) {
            document.getElementById('titulo').innerText = texto;
        }

        function alternarFuncao(funcao) {
            // Verifica se a função clicada é a mesma que a atual
            if (ferramentaAtual === funcao) {
                atualizarTitulo("Corretor Ortográfico"); // Volta o texto do label
                ferramentaAtual = null; // Reseta a ferramenta atual
                return; // Não executa a função
            }

            // Atualiza o texto do label com base na função selecionada
            switch (funcao) {
                case 'resumirTexto':
                    atualizarTitulo("Resumir Texto");
                    resumirTexto();
                    break;
                case 'traduzir':
                    atualizarTitulo("Tradutor");
                    traduzir();
                    break;
                case 'detectarPlagio':
                    atualizarTitulo("Detector de Plágio");
                    detectarPlagio();
                    break;
                case 'detectarIA':
                    atualizarTitulo("Detector de IA");
                    detectarIA();
                    break;
                case 'detectarIdioma':
                    atualizarTitulo("Detector de Idioma");
                    detectarIdioma();
                    break;
                default:
                    atualizarTitulo("Corretor Ortográfico");
            }

            ferramentaAtual = funcao; // Atualiza a ferramenta atual
        }

        async function resumirTexto() {
            const textToSummarize = document.getElementById('demo-editor').innerText;

            const response = await fetch('https://api.sapling.ai/api/v1/summarize', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    key: "UW44G50BQOU7WP5PQ2D8EXM5PECJFK43",
                    text: textToSummarize,
                }),
            });

            const result = await response.json();
            const summarizedText = result.result; // Supondo que 'result' contém o resumo

            // Traduzir o texto resumido usando MyMemory
            const translationResponse = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(summarizedText)}&langpair=en|pt`);
            const translationResult = await translationResponse.json();
            const translatedText = translationResult.responseData.translatedText; // Obtém o texto traduzido

            // Atualiza o label "Corretor ortográfico" para "Texto Resumido"
            document.getElementById('seuTexto').innerText = `Texto Resumido: ${translatedText}`;
        }

        async function traduzir() {
            const textToTranslate = document.getElementById('demo-editor').innerText;

            const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(textToTranslate)}&langpair=en|pt`);
            const result = await response.json();
            const translatedText = result.responseData.translatedText; // Obtém o texto traduzido

            document.getElementById('seuTexto').innerText = `Texto Traduzido: ${translatedText}`;
        }

        function detectarPlagio() {
            alert('Função de detecção de plágio não implementada ainda.');
        }

        function detectarIA() {
            alert('Função de detecção de IA não implementada ainda.');
        }

        function detectarIdioma() {
            alert('Função de detecção de idioma não implementada ainda.');
        }
    </script>
    <script type="text/javascript">
    // Inicializa o contador de caracteres
    const maxChars = 1000;
    const charCountLabel = document.getElementById('char-count');
    const contentEditableum = document.getElementById('demo-editor');

    // Atualiza a contagem de caracteres
    function updateCharCount() {
        const text = contentEditableum.innerText;
        const charCount = text.length;
        charCountLabel.innerText = `${charCount}/${maxChars} caracteres`;
        if (charCount > maxChars) {
            contentEditableum.innerText = text.substring(0, maxChars);
            charCountLabel.innerText = `${maxChars}/${maxChars} caracteres`;
        }
    }

    // Adiciona um ouvinte de evento para atualizar o contador quando o texto muda
    contentEditableum.addEventListener('input', updateCharCount);

    // Função para inicializar o contador de caracteres
    updateCharCount();

    // MASEFGW
     async function detectarIA() {
        const texto = document.getElementById('demo-editor').innerText;

        try {
            const response = await axios.post(
                'https://api.sapling.ai/api/v1/aidetect',
                {
                    key: 'UW44G50BQOU7WP5PQ2D8EXM5PECJFK43',
                    text: texto,
                }
            );

            // Verifica se a resposta contém a chave 'score'
            if (response.data && response.data.score !== undefined) {
                const porcentagem = (response.data.score * 100).toFixed(2); // Converte o score para porcentagem
                document.getElementById('seuTexto').innerText = `Seu texto está esplêndido! Probabilidade de IA: ${porcentagem}%`;
            } else {
                document.getElementById('seuTexto').innerText = 'Probabilidade de IA não disponível.';
            }
        } catch (err) {
            console.error('Erro ao detectar IA:', err.response ? err.response.data : err);
            document.getElementById('seuTexto').innerText = 'Erro na detecção de IA.';
        }
    }
</script>


</body>

</html>
